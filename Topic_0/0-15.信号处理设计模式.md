# åäº”ã€ä¿¡å·å¤„ç†è®¾è®¡æ¨¡å¼

## (ä¸€) Linuxåº”ç”¨ç¨‹åºå®‰å…¨æ€§è®¨è®º

### 1. é—®é¢˜

>â“å¦‚ä½•ç¼–å†™ä¿¡å·å®‰å…¨çš„åº”ç”¨ç¨‹åº? ? ?

### 2. ä¸åŒåœºæ™¯

#### (1) åœºæ™¯ä¸€ : ä¸éœ€è¦å¤„ç†ä¿¡å·

>- åº”ç”¨ç¨‹åºå®žçŽ°å•ä¸€åŠŸèƒ½ , ä¸éœ€è¦å…³æ³¨ä¿¡å·
>- å¦‚ : æ•°æ®å¤„ç†ç¨‹åº , æ–‡ä»¶åŠ å¯†ç¨‹åºã€ç§‘å­¦è®¡ç®—ç¨‹åº

#### (2) åœºæ™¯äºŒ : éœ€è¦å¤„ç†ä¿¡å·

>- åº”ç”¨ç¨‹åºé•¿æ—¶é—´è¿è¡Œ , éœ€è¦å…³æ³¨ä¿¡å· , å¹¶åŠæ—¶å¤„ç†
>- å¦‚ : æœåŠ¡ç«¯ç¨‹åº , ä¸Šä½æœºç¨‹åº
>

## (äºŒ) åœºæ™¯ä¸€ : ä¸éœ€è¦ä¿¡å·å¤„ç† (å•ä¸€åŠŸèƒ½åº”ç”¨ç¨‹åº)

>```
>ðŸ“– åœ¨ä»£ç å±‚é¢,ç›´æŽ¥é˜»å¡žæ‰€æœ‰å¯èƒ½çš„ä¿¡å·(æœ¬è´¨ä¸Šå°±æ˜¯ä¿¡å·å§‹ç»ˆå¤„äºŽæœªå†³çŠ¶æ€,æ— æ³•é€’è¾¾è¿›ç¨‹)
>```
>
><img src="./assets/image-20230801145158685.png" alt="image-20230801145158685" />
>
>- ç¼–ç¨‹å®žéªŒ : ä¸éœ€è¦å¤„ç†ä¿¡å·
>
>[ç¼–ç¨‹å®žéªŒï¼šä¸éœ€è¦å¤„ç†ä¿¡å·](https://github.com/WONGZEONJYU/Linux_System_Program/blob/main/10.Signal/15/0_no_need_signal/main.cpp)
>
><img src="./assets/image-20230801145207886.png" alt="image-20230801145207886" />
>
><img src="./assets/image-20230801145215027.png" alt="image-20230801145215027" />

## (ä¸‰) åœºæ™¯äºŒ : éœ€è¦å¤„ç†ä¿¡å· (é•¿æ—¶é—´è¿è¡Œçš„åº”ç”¨)

>- **$\color{red}{åŒæ­¥æ–¹æ¡ˆ}$**
>   - é€šè¿‡ **$\color{red}{æ ‡è®°}$** åŒæ­¥å¤„ç†ä¿¡å· , æ•´ä¸ªåº”ç”¨ä¸­ **$\color{red}{åªæœ‰ä¸€ä¸ªæ‰§è¡Œæµ( äº¤æ›¿æ‰§è¡Œ )}$**
>- **$\color{red}{å¼‚æ­¥æ–¹æ¡ˆ}$**
>   - ä¸“ç”¨ä»»åŠ¡å¤„ç† , åº”ç”¨ä¸­å­˜åœ¨ **$\color{red}{å¤šä¸ªæ‰§è¡Œæµ (å¤šçº¿ç¨‹åº”ç”¨)}$**
>   - è®¾ç½® **$\color{red}{ä¸“ç”¨äºŽä¿¡å·å¤„ç†çš„ä»»åŠ¡}$** , å…¶å®ƒä»»åŠ¡å¿½ç•¥ä¿¡å· , ä¸“æ³¨åŠŸèƒ½å®žçŽ°

### 1.åŒæ­¥è§£å†³æ–¹æ¡ˆ (å•ä»»åŠ¡)

> - ä¿¡å·å¤„ç†é€»è¾‘ä¸Žç¨‹åºé€»è¾‘ä½äºŽåŒä¸€ä¸ªä¸Šä¸‹æ–‡
>   - å³ï¼šä¿¡å·å¤„ç†å‡½æ•°ä¸Žä¸»å‡½æ•°ä¸å­˜åœ¨èµ„æºç«žäº‰å…³ç³»

#### (1) æ–¹æ¡ˆè®¾è®¡ä¸€

>1. å°†ä»»åŠ¡åˆ†è§£ä¸º **$\color{red}{å­ä»»åŠ¡}$** (æ¯ä¸ªä»»åŠ¡å¯å¯¹åº”ä¸€ä¸ªå‡½æ•°)
>2. ä¿¡å·é€’è¾¾æ—¶ , ä¿¡å·å¤„ç†å‡½æ•°ä¸­ $\color{red}{ä»…}$ **$\color{red}{æ ‡è®°}$** $\color{red}{é€’è¾¾çŠ¶æ€}$
>3. $\color{red}{å­ä»»åŠ¡å¤„ç†ç»“æŸåŽ , çœŸæ­£æ‰§è¡Œä¿¡å·å¤„ç†}$
>
><img src="./assets/image-20230801145224046.png" alt="image-20230801145224046" />

##### â‘  åŒæ­¥æ–¹æ¡ˆç¤ºä¾‹ä¸€

><img src="./assets/image-20230801145230004.png" alt="image-20230801145230004" />

##### â‘¡ ç¼–ç¨‹å®žéªŒ

>[åŒæ­¥æ–¹æ¡ˆä¸€å‚è€ƒä»£ç ](https://github.com/WONGZEONJYU/Linux_System_Program/tree/main/10.Signal/15/1_Synchronize)

###### a. å¯¹äºŽä¸å¯é ä¿¡å·

><img src="./assets/image-20230801145238362.png" alt="image-20230801145238362" />
>
><img src="./assets/image-20230801145245714.png" alt="image-20230801145245714" />

###### b. å¯¹äºŽå¯é ä¿¡å·å­˜åœ¨é—®é¢˜

><img src="./assets/image-20230801145251952.png" alt="image-20230801145251952" />
>
><img src="./assets/image-20230801145258893.png" alt="image-20230801145258893" />
>
><img src="./assets/image-20230801145305278.png" alt="image-20230801145305278" />

##### â‘¢ å­˜åœ¨çš„é—®é¢˜

>- ç”±äºŽç»™æ¯ä¸ªä¿¡å·å”¯ä¸€çš„æ ‡è®°ä½ç½® , å› æ­¤ , **$\color{red}{æ‰€æœ‰ä¿¡å·è½¬å˜ä¸ºä¸å¯é ä¿¡å·}$** , å¹¶ä¸”ä»…ä¿ç•™æœ€è¿‘é€’è¾¾çš„ä¿¡å·ä¿¡æ¯
>- å¯èƒ½æ”¹è¿›æ–¹æ¡ˆ : 
>   - æ ‡è®°ä½ç½®è®¾è®¡ä¸ºé“¾è¡¨ , ä¿¡å·é€’è¾¾åŽåœ¨å¯¹åº”ä½ç½®çš„é“¾è¡¨å¤„å¢žåŠ ç»“ç‚¹ä¿ç•™ä¿¡å·ä¿¡æ¯ ( å¢žåŠ ç»“ç‚¹æ¶‰åŠåˆ° `malloc()` , ä¸å®‰å…¨ )
>

#### (2) æ–¹æ¡ˆè®¾è®¡äºŒ

> - å°†ä»»åŠ¡åˆ†è§£ä¸ºå­ä»»åŠ¡ (æ¯ä¸ªä»»åŠ¡å¯å¯¹åº”ä¸€ä¸ªå‡½æ•°)
> - åˆ›å»º **$\color{red}{ä¿¡å·æ–‡ä»¶æè¿°ç¬¦}$** , å¹¶é˜»å¡žæ‰€æœ‰ä¿¡å· (å¯é ä¿¡å·é€’è¾¾å‰ä½äºŽå†…æ ¸é˜Ÿåˆ—)
>   - æ„ä¹‰ : åŒ–è¢«åŠ¨ä¸ºä¸»åŠ¨ , åŽŸå…ˆä»»åŠ¡çš„æ‰§è¡Œæµåœ¨æ”¶åˆ°ä¿¡å·åŽè¢«åŠ¨ä¸­æ–­ã€‚çŽ°åœ¨ä¸»åŠ¨åŽ»æ£€æŸ¥æ˜¯å¦æœ‰ä¿¡å· , å¦‚æžœæœ‰ä¿¡å· , å°†ä¿¡å·å–å‡ºæ¥å¤„ç† , æ­¤æ—¶å°±éœ€è¦æ–‡ä»¶æè¿°ç¬¦ã€‚
> - å­ä»»åŠ¡å¤„ç†ç»“æŸåŽ , é€šè¿‡ `select(...)` $\color{red}{æœºåˆ¶}$ åˆ¤æ–­æ˜¯å¦æœ‰ä¿¡å·éœ€è¦å¤„ç†
>   - `true` : å¤„ç†ä¿¡å· , `false` : ç­‰å¾…è¶…æ—¶

##### â‘  ç³»ç»Ÿå…³é”®å‡½æ•°

><img src="./assets/image-20230801145313868.png" alt="image-20230801145313868" />
>
>- ä½¿ç”¨ `signalfd()` å¤„ç†ä¿¡å·
>  - å…ˆå±è”½æ‰€æœ‰ä¿¡å·(æ— æ³•é€’è¾¾è¿›ç¨‹) , ä¹‹åŽä¸ºå±è”½ä¿¡å·åˆ›å»ºæ–‡ä»¶æè¿°ç¬¦ , å½“æ—¶æœºæˆç†Ÿ , é€šè¿‡ `read()` ç³»ç»Ÿè°ƒç”¨è¯»å–æœªå†³ä¿¡å· (ä¸»åŠ¨æŽ¥æ”¶ä¿¡å·)
>
><img src="./assets/image-20230801145321785.png" alt="image-20230801145321785" />
>
>- ä½¿ç”¨ `select(...)` ç›‘å¬æ–‡ä»¶æè¿°ç¬¦ (ç®€å•ä»‹ç» `selelct(...)` å‡½æ•°æ€Žä¹ˆä½¿ç”¨)
>
><img src="./assets/image-20230801145329694.png" alt="image-20230801145329694" />
>
>- ä½¿ç”¨  `select(...)` å¤„ç†ä¿¡å·
>
><img src="./assets/image-20230801145336165.png" alt="image-20230801145336165" />

##### â‘¡ ç¼–ç¨‹å®žéªŒ

>[åŒæ­¥æ–¹æ¡ˆäºŒå‚è€ƒä»£ç ](https://github.com/WONGZEONJYU/Linux_System_Program/tree/main/10.Signal/15/2_Synchronize_select)

###### a.å¯é ä¿¡å· (å®žæ—¶ä¿¡å·)

><img src="./assets/image-20230801145342846.png" alt="image-20230801145342846" />
>
><img src="./assets/image-20230801145348431.png" alt="image-20230801145348431" />
>
><img src="./assets/image-20230801145354625.png" alt="image-20230801145354625" />

###### b. ä¸å¯é ä¿¡å·

><img src="./assets/image-20230801145400418.png" alt="image-20230801145400418" />
>
><img src="./assets/image-20230801145406736.png" alt="image-20230801145406736" />

##### â‘¢ å­˜åœ¨çš„é—®é¢˜

>- è™½ç„¶è§£å†³äº†ä¿¡å·ä¸¢å¤±çš„é—®é¢˜ , ä½†æ˜¯å®žæ—¶æ€§ä¸å¥½ã€‚ç”±äºŽä½¿ç”¨äº†`select(...)` æœºåˆ¶ , å³ä¾¿æ²¡æœ‰ä¿¡å·éœ€è¦å¤„ç† , ä¹Ÿéœ€è¦ç­‰å¾… `select(...)` è¶…æ—¶ , $\color{red}{ä»»åŠ¡}$ **$\color{red}{å®žæ—¶æ€§}$** $\color{red}{å—åˆ°å½±å“}$ã€‚
>
><img src="./assets/image-20230801145414945.png" alt="image-20230801145414945" />

##### â‘£ æ€è€ƒ

>â“æ˜¯å¦å¯ä»¥å…¼é¡¾ **$\color{red}{ä¿¡å·å¤„ç†}$** ä¸Ž **$\color{red}{ä»»åŠ¡æ‰§è¡Œ}$** çš„å®žæ—¶æ€§?

### 2. å¼‚æ­¥è§£å†³æ–¹æ¡ˆ (å¤šä»»åŠ¡) 

>- ä½¿ç”¨ç‹¬ç«‹ä»»åŠ¡å¤„ç†ä¿¡å· , ç¨‹åºé€»è¾‘åœ¨å…¶å®ƒä»»åŠ¡ä¸­æ‰§è¡Œ
>- å³ : é€šè¿‡ **$\color{red}{å¤šçº¿ç¨‹}$** åˆ†ç¦»ä¿¡å·å¤„ç†ä¸Žç¨‹åºé€»è¾‘
>   - ä¸»çº¿ç¨‹ : ä¸“ç”¨äºŽå¤„ç†ä¿¡å·
>   - å…¶å®ƒçº¿ç¨‹ : å®Œæˆç¨‹åºåŠŸèƒ½

#### (1) é—®é¢˜

>â“ä¿¡å·é€’è¾¾è¿›ç¨‹åŽ , åœ¨ **$\color{red}{å“ªä¸€ä¸ªæ‰§è¡Œæµ}$** ä¸­è¿›è¡Œå¤„ç†?

#### (2) å¤šçº¿ç¨‹ä¿¡å·å¤„ç†

>- ä¿¡å·çš„å‘é€ç›®æ ‡æ˜¯ **$\color{red}{è¿›ç¨‹}$** , è€Œä¸æ˜¯æŸä¸ªç‰¹å®šçš„çº¿ç¨‹
>- å‘é€ç»™è¿›ç¨‹çš„ä¿¡å·ä»…é€’é€ç»™ä¸€ä¸ªçº¿ç¨‹ ==> å“ªä¸€ä¸ªçº¿ç¨‹å¤„ç†ï¼Ÿ
>- å†…æ ¸åœ¨ä¸ä¼šé˜»å¡žç›®æ ‡ä¿¡å·çš„çº¿ç¨‹ä¸­è¿›è¡Œéšæœºé€‰æ‹© (é‚£ä¸ªçº¿ç¨‹æ²¡æœ‰å±è”½ä¿¡å· , å°±åœ¨å“ªä¸ªçº¿ç¨‹çš„æ‰§è¡Œæµæ‰§è¡Œ)
>- æ¯ä¸ªçº¿ç¨‹æ‹¥æœ‰ç‹¬ç«‹çš„ä¿¡å·å±è”½æŽ©ç 

#### (3) æ–¹æ¡ˆ

>- ä¸»çº¿ç¨‹ : å¯¹ç›®æ ‡ä¿¡å·è®¾ç½®ä¿¡å·å¤„ç†çš„æ–¹å¼
>   - å½“ä¿¡å·é€’è¾¾è¿›ç¨‹æ—¶ , åªå¯èƒ½æ˜¯ **$\color{red}{ä¸»çº¿ç¨‹}$** è¿›è¡Œä¿¡å·å¤„ç†
>- å…¶å®ƒçº¿ç¨‹ : é¦–å…ˆå±è”½æ‰€æœ‰å¯èƒ½çš„ä¿¡å· (ç®€å•ç²—æš´) ,ä¹‹åŽæ‰§è¡Œä»»åŠ¡ä»£ç 
>   - æ— æ³•æŽ¥æ”¶åˆ°ä¿¡å· , ä¸å…·å¤‡ä¿¡å·å¤„ç†èƒ½åŠ›
>

#### (4) è¿›ç¨‹ä¸Žçº¿ç¨‹

>**$\color{red}{è¿›ç¨‹ : åº”ç”¨ç¨‹åºçš„ä¸€æ¬¡åŠ è½½æ‰§è¡Œ (ç³»ç»Ÿè¿›è¡Œèµ„æºåˆ†é…çš„åŸºæœ¬å•ä½)}$**
>
>**$\color{red}{çº¿ç¨‹ : è¿›ç¨‹ä¸­çš„ç¨‹åºæ‰§è¡Œæµ}$**
>
>- ä¸€ä¸ªè¿›ç¨‹å¯ä»¥å­˜åœ¨å¤šä¸ªçº¿ç¨‹ (è‡³å°‘å­˜åœ¨ä¸€ä¸ªçº¿ç¨‹)
>- æ¯ä¸ªçº¿ç¨‹æ‰§è¡Œä¸åŒçš„ä»»åŠ¡ (å¤šä¸ªçº¿ç¨‹å¯å¹¶è¡Œæ‰§è¡Œ)
>- åŒä¸€ä¸ªè¿›ç¨‹ä¸­çš„å¤šä¸ªçº¿ç¨‹å…±äº«è¿›ç¨‹çš„ç³»ç»Ÿèµ„æº

##### â‘  Linuxå¤šçº¿ç¨‹APIå‡½æ•°

><img src="./assets/image-20230801145427512.png" alt="image-20230801145427512" />
>
>- çº¿ç¨‹æ ‡è¯† : `pthread_t pthread_self(void);`
>   - èŽ·å–å½“å‰çº¿ç¨‹çš„IDæ ‡è¯† (tid)
>- çº¿ç¨‹ç­‰å¾… : `int pthread_join(pthread_t thread, void** retval);`
>   - ç­‰å¾…ç›®æ ‡çº¿ç¨‹æ‰§è¡Œç»“æŸ
>

##### â‘¡ å¤šçº¿ç¨‹ç¼–ç¨‹ç¤ºä¾‹

><img src="./assets/image-20230801145436235.png" alt="image-20230801145436235" />

#### (5) å¼‚æ­¥æ–¹æ¡ˆç¤ºä¾‹

##### â‘ ä¸»çº¿ç¨‹

><img src="./assets/image-20230801145442457.png" alt="image-20230801145442457" />

##### â‘¡ ä»»åŠ¡çº¿ç¨‹

><img src="./assets/image-20230801145449378.png" alt="image-20230801145449378" />

#### (6) ç¼–ç¨‹å®žéªŒ : å¤šçº¿ç¨‹ä¿¡å·å¤„ç†

>[å¤šçº¿ç¨‹ä¿¡å·å¤„ç†å‚è€ƒä»£ç ](https://github.com/WONGZEONJYU/Linux_System_Program/tree/main/10.Signal/15/3_Synchronize_thread)

##### â‘ ä¸å¯é ä¿¡å·

><img src="./assets/image-20230801145456241.png" alt="image-20230801145456241" />
>
><img src="./assets/image-20230801145501931.png" alt="image-20230801145501931" />

##### â‘¡ å¯é ä¿¡å·(å®žæ—¶ä¿¡å·)

><img src="./assets/image-20230801145508243.png" alt="image-20230801145508243" />
>
><img src="./assets/image-20230801145514364.png" alt="image-20230801145514364" />
>
>![image-20230801145521471](./assets/image-20230801145521471.png)

## (å››) ä¿¡å·è®¾è®¡æ¨¡å¼å°ç»“

>- å¤šæ•°ç¨‹åºä¸éœ€è¦å¤„ç†ä¿¡å· , å› æ­¤å¯ç›´æŽ¥å±è”½ä¿¡å·
>- éœ€è¦å¤„ç†ä¿¡å·çš„ç¨‹åº , é‡ç‚¹è€ƒè™‘ä¿¡å·å®‰å…¨æ€§é—®é¢˜
>   - $\color{red}{åŒæ­¥ å¤„ç†æ–¹æ¡ˆ,é€šè¿‡è®¾è®¡è®©}$ **$\color{red}{ä»»åŠ¡ä»£ç }$** $\color{red}{å’Œ}$ **$\color{red}{ä¿¡å·å¤„ç†ä»£ç }$** $\color{red}{äº¤æ›¿æ‰§è¡Œ}$
>     - é—®é¢˜ : ä¿¡å·å¤„ç†æ˜¯å¦åŠæ—¶? ä»»åŠ¡æ‰§è¡Œæ˜¯å¦å®žæ—¶?
>   - $\color{red}{å¼‚æ­¥ å¤„ç†æ–¹æ¡ˆ,}$ **$\color{red}{ä»»åŠ¡ä»£ç }$** $\color{red}{ä¸Ž}$ **$\color{red}{ä¿¡å·å¤„ç†ä»£ç }$** $\color{red}{ä½äºŽ ä¸åŒæ‰§è¡Œæµ}$
>     - é—®é¢˜ : å°†ä¿¡å·å®‰å…¨æ€§é—®é¢˜è½¬æ¢ä¸ºçº¿ç¨‹å®‰å…¨æ€§é—®é¢˜ , å› æ­¤ , ç¨‹åºæœ¬èº«æ˜¯å¦åšåˆ°çº¿ç¨‹å®‰å…¨?
>

