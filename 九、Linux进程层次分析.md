# ä¹ã€Linuxè¿›ç¨‹å±‚æ¬¡åˆ†æž

## (ä¸€) è¯¦è§£Linuxè¿›ç¨‹ç»„

### 1. Linuxè¿›ç¨‹ç»„

>- $\color{red}{æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰ä¸€ä¸ª è¿›ç¨‹ç»„å· ( PGID )}$
>   - è¿›ç¨‹ç»„ : $\color{red}{ä¸€ä¸ªæˆ–å¤šä¸ªè¿›ç¨‹çš„é›†åˆ}$ **( é›†åˆä¸­çš„è¿›ç¨‹å¹¶ä¸å­¤ç«‹ )**
>   - è¿›ç¨‹ç»„ä¸­çš„è¿›ç¨‹é€šå¸¸å­˜åœ¨ $\color{red}{çˆ¶å­å…³ç³» , å…„å¼Ÿå…³ç³» , æˆ–åŠŸèƒ½ç›¸è¿‘}$
>
>- è¿›ç¨‹ç»„å¯æ–¹ä¾¿è¿›ç¨‹ç®¡ç† ( å¦‚ : åŒæ—¶æ€æ­»å¤šä¸ªè¿›ç¨‹ï¼Œå‘é€ä¸€ä¸ªä¿¡å·ç»™å¤šä¸ªè¿›ç¨‹)
>   - æ¯ä¸ªè¿›ç¨‹å¿…å®šå±žäºŽä¸€ä¸ªè¿›ç¨‹ç»„ï¼Œä¹Ÿåªèƒ½å±žäºŽä¸€ä¸ªè¿›ç¨‹ç»„
>   - è¿›ç¨‹é™¤äº†æœ‰ PID å¤– , è¿˜æœ‰ PGID ( å”¯ä¸€ , ä½†å¯å˜ )
>   - æ¯ä¸ªè¿›ç¨‹ç»„æœ‰ä¸€ä¸ª $\color{red}{è¿›ç¨‹ç»„é•¿}$ï¼Œ$\color{SkyBlue}{è¿›ç¨‹ç»„é•¿çš„PIDå’ŒPGIDç›¸åŒ(PID == PGID)}$
>
>- `pid_t getpgrp(void);`  èŽ·å–å½“å‰è¿›ç¨‹çš„ç»„æ ‡è¯†
>- `pid_t getpgid(pid_t pid);`  èŽ·å–æŒ‡å®šè¿›ç¨‹çš„ç»„æ ‡è¯†
>- å¯¹äºŽ `int setpgid(pid_t pid, pid_t pgid);` è®¾ç½®pidè¿›ç¨‹çš„è¿›ç¨‹ç»„æ ‡è¯†ä¸ºpgid : 
>   - å¦‚æžœ pid == pgid , å°†pidæŒ‡å®šçš„è¿›ç¨‹è®¾ä¸ºç»„é•¿
>   - å¦‚æžœ pid == 0 , è®¾ç½®å½“å‰è¿›ç¨‹çš„ç»„æ ‡è¯†ä¸ºpgid
>   - å¦‚æžœ pgid == 0 , åˆ™å°†pidä½œä¸ºç»„æ ‡è¯†
>
>
>```tex
>æ³¨é‡Šï¼š
>   å‡½æ•°ä½œç”¨ï¼šsetpgid(pid, pgid) å°†pidè¿›ç¨‹çš„è¿›ç¨‹ç»„IDè®¾ç½®æˆpgidï¼Œåˆ›å»ºä¸€ä¸ªæ–°è¿›ç¨‹ç»„æˆ–åŠ å…¥ä¸€ä¸ªå·²å­˜åœ¨çš„è¿›ç¨‹ç»„
>   å‡½æ•°æ€§è´¨:
>       æ€§è´¨1:ä¸€ä¸ªè¿›ç¨‹åªèƒ½ä¸º è‡ªå·±æˆ–å­è¿›ç¨‹ è®¾ç½®è¿›ç¨‹ç»„IDï¼Œä¸èƒ½è®¾ç½®å…¶çˆ¶è¿›ç¨‹çš„è¿›ç¨‹ç»„IDã€‚
>       æ€§è´¨2:if(pid == pgid)ï¼Œç”±pidæŒ‡å®šçš„è¿›ç¨‹å˜æˆè¿›ç¨‹ç»„é•¿ï¼›å³è¿›ç¨‹pidçš„è¿›ç¨‹ç»„æ ‡è¯†pgidä¸ºpidã€‚
>       æ€§è´¨3:if(pid==0)ï¼Œå°†å½“å‰è¿›ç¨‹çš„pidä½œä¸ºè¿›ç¨‹ç»„IDã€‚
>       æ€§è´¨4:if(pgid==0)ï¼Œå°†pidä½œä¸ºè¿›ç¨‹ç»„IDã€‚
>```
>
>- **$\color{red}{é»˜è®¤æƒ…å†µä¸‹ , å­è¿›ç¨‹ä¸Žçˆ¶è¿›ç¨‹ å±žäºŽ åŒä¸€ä¸ªè¿›ç¨‹ç»„}$**

### 2. è¿›ç¨‹ç»„ç¤ºä¾‹ç¨‹åº

><img src="ä¹ã€Linuxè¿›ç¨‹å±‚æ¬¡åˆ†æž.assets/image-20230721174913135.png" alt="image-20230721174913135" />

### 3. ç¼–ç¨‹å®žéªŒ : Linuxè¿›ç¨‹ç»„

>[pgid_j.cppå‚è€ƒä»£ç ](https://github.com/WONGZEONJYU/Linux_System_Program/blob/main/8.Process_Hierarchy/pgid_j.cpp)
>
><img src="ä¹ã€Linuxè¿›ç¨‹å±‚æ¬¡åˆ†æž.assets/image-20230721175036218.png" alt="image-20230721175036218" />
>
><img src="ä¹ã€Linuxè¿›ç¨‹å±‚æ¬¡åˆ†æž.assets/image-20230721175049067.png" alt="image-20230721175049067" />

### 4. æ·±å…¥ç†è§£è¿›ç¨‹ç»„

>- è¿›ç¨‹ç»„é•¿ç»ˆæ­¢ , è¿›ç¨‹ç»„ä¾ç„¶å­˜åœ¨ $\color{SkyBlue}{(è¿›ç¨‹ç»„é•¿ä»…ç”¨äºŽåˆ›å»ºæ–°è¿›ç¨‹ç»„)}$ , $\color{red}{è¿›ç¨‹ç»„ä¸­çš„ æ‰€æœ‰è¿›ç¨‹ ç»“æŸä¹‹åŽ , è¿›ç¨‹ç»„æ¶ˆäº¡}$
>- çˆ¶è¿›ç¨‹åˆ›å»ºå­è¿›ç¨‹åŽç«‹å³é€šè¿‡ `setpgid()` æ”¹å˜å­è¿›ç¨‹çš„ç»„æ ‡è¯† ( PGID ) , å­è¿›ç¨‹ä»Žçˆ¶è¿›ç¨‹çš„è¿›ç¨‹ç»„ç§»åŠ¨åˆ°ç»„æ ‡è¯†çš„è¿›ç¨‹ç»„ï¼›åŒæ—¶ , å­è¿›ç¨‹ä¹Ÿéœ€è¦é€šè¿‡ `setpgid()` æ”¹å˜è‡ªèº«ç»„æ ‡è¯† (PGID)
>- å­è¿›ç¨‹ $\color{red}{å¦‚æžœè°ƒç”¨}$ `exec()` , é‚£ä¹ˆ : 
>   - **çˆ¶è¿›ç¨‹æ— æ³•é€šè¿‡ `setpgid()` æ”¹å˜å­è¿›ç¨‹çš„ç»„æ ‡è¯† (PGID)**
>   - **å­è¿›ç¨‹åªèƒ½è‡ªèº«é€šè¿‡ `setpgid()` æ”¹å˜ç»„æ ‡è¯† (PGID)**
>

#### (1) è¿›ç¨‹ç»„æ ‡è¯†è®¾ç½®æŠ€å·§

><img src="ä¹ã€Linuxè¿›ç¨‹å±‚æ¬¡åˆ†æž.assets/image-20230721175606668.png" alt="image-20230721175606668" />
>
>```C+
>setpgrp() <===> setpgid(0,0)
>```

#### (2) ç¼–ç¨‹å®žéªŒä¸€

>[pgid_a.cppä»£ç å‚è€ƒ](https://github.com/WONGZEONJYU/Linux_System_Program/blob/main/8.Process_Hierarchy/pgid_a.cpp)
>
><img src="ä¹ã€Linuxè¿›ç¨‹å±‚æ¬¡åˆ†æž.assets/image-20230721175740636.png" alt="image-20230721175740636" />
>
><img src="ä¹ã€Linuxè¿›ç¨‹å±‚æ¬¡åˆ†æž.assets/image-20230721175746990.png" alt="image-20230721175746990" />

#### (3) ç¼–ç¨‹å®žéªŒäºŒ

>[ä¸Žå®žéªŒä¸€åŒä¸€ä¸ªæ–‡ä»¶,æ³¨æ„å±è”½çš„ä»£ç ,æˆ‘æ˜¯å‚è€ƒé“¾æŽ¥,æˆ‘å¯ä»¥ç‚¹å¼€](https://github.com/WONGZEONJYU/Linux_System_Program/blob/main/8.Process_Hierarchy/pgid_a.cpp)
>
>1. æœªåŠ ä¼‘çœ 
>
><img src="ä¹ã€Linuxè¿›ç¨‹å±‚æ¬¡åˆ†æž.assets/image-20230721180140907.png" alt="image-20230721180140907" />
>
><img src="ä¹ã€Linuxè¿›ç¨‹å±‚æ¬¡åˆ†æž.assets/image-20230721180148256.png" alt="image-20230721180148256" />
>
>2. åŠ ä¼‘çœ 
>
><img src="ä¹ã€Linuxè¿›ç¨‹å±‚æ¬¡åˆ†æž.assets/image-20230721180217310.png" alt="image-20230721180217310" />
>
>```tex
>æ³¨é‡Š:ä»£ç ä¸­çš„sleep(1),ä½¿å¾—å­è¿›ç¨‹å…ˆè°ƒç”¨äº†evec(),çˆ¶è¿›ç¨‹æ— æ³•å†é€šè¿‡setpgid()æ”¹å˜å­è¿›ç¨‹çš„ç»„æ ‡è¯†(PGID)
>```
>
><img src="ä¹ã€Linuxè¿›ç¨‹å±‚æ¬¡åˆ†æž.assets/image-20230721180253362.png" alt="image-20230721180253362" />

## (äºŒ) ä¼šè¯ä¸Žç»ˆç«¯çš„å…³ç³»

### 1. Linuxä¼šè¯ (session)

>- ç”¨æˆ·é€šè¿‡ç»ˆç«¯ç™»é™†ç³»ç»ŸåŽä¼šäº§ç”Ÿä¸€ä¸ª **$\color{red}{ä¼šè¯}$**
>- ä¼šè¯æ˜¯ ä¸€ä¸ªæˆ–å¤šä¸ª **$\color{red}{è¿›ç¨‹ç»„}$** çš„é›†åˆ
>- æ¯ä¸ªä¼šè¯æœ‰ä¸€ä¸ª **$\color{red}{ä¼šè¯æ ‡è¯† (SID)}$**
>   - ç»ˆç«¯ç™»å½•åŽçš„ç¬¬ä¸€ä¸ªè¿›ç¨‹æˆä¸º **$\color{red}{ä¼šè¯é¦–è¿›ç¨‹}$** , é€šå¸¸æ˜¯ä¸€ä¸ª **$\color{SkyBlue}{shell / bash}$**
>   - å¯¹äºŽä¼šè¯é¦–è¿›ç¨‹ (session leader) , å…¶PIDå’ŒSIDç›¸ç­‰ , **$\color{red}{SID == PID}$**
>
>
>| ä¼šè¯SID |
>| :-----: |
>
>| è¿›ç¨‹ç»„PGID | è¿›ç¨‹ç»„PGID | ...  |
>| :--------: | :--------: | ---- |
>
>| è¿›ç¨‹PID | è¿›ç¨‹PID | ...  | è¿›ç¨‹PID | è¿›ç¨‹PID | ...  | ...  |
>| :-----: | ------- | ---- | ------- | ------- | ---- | ---- |

### 2. ä¼šè¯ä¸Žç»ˆç«¯

>- é€šå¸¸æƒ…å†µä¸‹ , **$\color{red}{ä¼šè¯}$** $\color{red}{ä¸Žä¸€ä¸ª}$ **$\color{red}{ç»ˆç«¯ (æŽ§åˆ¶ç»ˆç«¯)}$** $\color{red}{ç›¸å…³è”}$ ç”¨äºŽæ‰§è¡Œè¾“å…¥è¾“å‡ºæ“ä½œ
>- **$\color{red}{ä¼šè¯é¦–è¿›ç¨‹}$** $\color{red}{å»ºç«‹ä¸Ž}$ **$\color{red}{æŽ§åˆ¶ç»ˆç«¯}$** $\color{red}{çš„è¿žæŽ¥}$ $\color{red}{(ä¼šè¯é¦–è¿›ç¨‹åˆå«}$ **$\color{red}{æŽ§åˆ¶ç»ˆç«¯}$**$\color{red}{)}$
>- ä¼šè¯ä¸­çš„è¿›ç¨‹ç»„å¯åˆ†ä¸º : 
>   - $\color{red}{å‰å°è¿›ç¨‹ç»„}$ : å¯æŽ¥æ”¶æŽ§åˆ¶ç»ˆç«¯ä¸­çš„è¾“å…¥ , ä¹Ÿå¯è¾“å‡ºæ•°æ®åˆ°æŽ§åˆ¶ç»ˆç«¯
>   - $\color{red}{åŽå°è¿›ç¨‹ç»„}$ : æ‰€æœ‰è¿›ç¨‹åŽå°è¿è¡Œ , æ— æ³•æŽ¥å—ç»ˆç«¯ä¸­çš„è¾“å…¥ , ä½†å¯è¾“å‡ºæ•°æ®åˆ°ç»ˆç«¯
>
>- æ¯ä¸ªä¼šè¯ $\color{red}{æœ€å¤šåªæœ‰ä¸€ä¸ª}$ å‰å°è¿›ç¨‹ç»„ , å¯ä»¥ $\color{red}{æœ‰å¤šä¸ª}$ åŽå°è¿›ç¨‹ç»„
>
><img src="ä¹ã€Linuxè¿›ç¨‹å±‚æ¬¡åˆ†æž.assets/image-20230721225218148.png" alt="image-20230721225218148" />

### 3. ç™»é™†å®žéªŒ

#### (1) å‡†å¤‡

><img src="ä¹ã€Linuxè¿›ç¨‹å±‚æ¬¡åˆ†æž.assets/image-20230721225358645.png" alt="image-20230721225358645" />
>
>```tex
>agetty æ˜¯ä¸€ä¸ªåœ¨ Linux ç³»ç»Ÿä¸Šä½¿ç”¨çš„ç¨‹åºï¼Œç”¨äºŽæä¾›æŽ§åˆ¶å°ç»ˆç«¯çš„ç™»å½•åŠŸèƒ½ã€‚å®ƒæ˜¯ "getty" ("é€‚é…å™¨è°ƒåˆ¶è§£è°ƒå™¨"çš„ç¼©å†™) çš„ä¸€ä¸ªå˜ä½“,æ˜¯ä¸€ç§ç”¨äºŽå¤„ç†ç»ˆç«¯ç™»å½•çš„ç¨‹åºã€‚
>â€ƒâ€ƒagetty çš„ä¸­æ–‡è§£é‡Šå¯ä»¥æ˜¯ "è™šæ‹Ÿç»ˆç«¯ç™»å½•ç¨‹åº" æˆ–è€… "æŽ§åˆ¶å°ç»ˆç«¯ç™»å½•ç¨‹åº"ã€‚å®ƒé€šå¸¸ç”¨äºŽåœ¨ Linux ç³»ç»Ÿä¸Šé…ç½®å’Œç®¡ç†è™šæ‹Ÿç»ˆç«¯(ä¹Ÿç§°ä¸ºæŽ§åˆ¶å°ç»ˆç«¯)çš„ç™»å½•è¿‡ç¨‹ã€‚
>â€ƒâ€ƒagetty åœ¨å¯åŠ¨æ—¶ä¼šç›‘è§†ä¸€ä¸ªæˆ–å¤šä¸ªè™šæ‹Ÿç»ˆç«¯è®¾å¤‡,å¹¶ç­‰å¾…ç”¨æˆ·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ã€‚ä¸€æ—¦ç”¨æˆ·æˆåŠŸç™»å½•ï¼Œagetty å°†ä¸ºå…¶æä¾›ä¸€ä¸ªäº¤äº’å¼çš„å‘½ä»¤è¡Œç•Œé¢,ä»¥ä¾¿ç”¨æˆ·å¯ä»¥æ‰§è¡Œå„ç§å‘½ä»¤å’Œæ“ä½œã€‚
>â€ƒâ€ƒagetty æä¾›äº†ä¸€äº›é…ç½®é€‰é¡¹,å¯ä»¥æŽ§åˆ¶ç™»å½•ç•Œé¢çš„å¤–è§‚å’Œè¡Œä¸º,ä¾‹å¦‚ç™»å½•æç¤ºç¬¦ã€è¶…æ—¶è®¾ç½®å’Œç™»å½•å¤±è´¥å¤„ç†ç­‰ã€‚è¿™ä½¿å¾—ç³»ç»Ÿç®¡ç†å‘˜èƒ½å¤Ÿæ ¹æ®ç‰¹å®šçš„éœ€æ±‚å’Œå®‰å…¨ç­–ç•¥æ¥è‡ªå®šä¹‰ç™»å½•è¿‡ç¨‹ã€‚
>â€ƒâ€ƒæ€»ä¹‹,agetty æ˜¯ä¸€ä¸ªç”¨äºŽç®¡ç†æŽ§åˆ¶å°ç»ˆç«¯ç™»å½•çš„ç¨‹åº,åœ¨ Linux ç³»ç»Ÿä¸Šå¹¿æ³›ä½¿ç”¨ã€‚
>```

#### (2) æ­¤æ—¶,åœ¨è™šæ‹ŸæœºUbuntuä¸‹åŒæ—¶æŒ‰ä½ ctrl+alt+F6 è¿›å…¥6å·ç»ˆç«¯,è¿™æ—¶å€™å…ˆä¸è¿›è¡Œç™»å½• :

><img src="ä¹ã€Linuxè¿›ç¨‹å±‚æ¬¡åˆ†æž.assets/image-20230721225921555.png" alt="image-20230721225921555" />

#### (3) åŒæ—¶æŒ‰ä½ ctrl+alt+F2 å›žåˆ°shellå›¾å½¢ç•Œé¢:

><img src="ä¹ã€Linuxè¿›ç¨‹å±‚æ¬¡åˆ†æž.assets/image-20230721230000056.png" alt="image-20230721230000056" />

#### (4) åˆ‡æ¢åˆ°6å·ç»ˆç«¯,åªè¾“å…¥ç”¨æˆ·å,ä¸ç™»å½•:

><img src="ä¹ã€Linuxè¿›ç¨‹å±‚æ¬¡åˆ†æž.assets/image-20230721230106086.png" alt="image-20230721230106086" />

#### (5) åˆ‡å›žå›¾å½¢åŒ–ç•Œé¢ :

><img src="ä¹ã€Linuxè¿›ç¨‹å±‚æ¬¡åˆ†æž.assets/image-20230721230139656.png" alt="image-20230721230139656" />

#### (6) åˆ‡æ¢åˆ°6å·ç»ˆç«¯,è¾“å…¥å¯†ç ç™»å½•:

><img src="ä¹ã€Linuxè¿›ç¨‹å±‚æ¬¡åˆ†æž.assets/image-20230721230215722.png" alt="image-20230721230215722" />

#### (7) åˆ‡æ¢å›žå›¾å½¢åŒ–ç•Œé¢:

>```
>ðŸ˜…ä¸‹å›¾æ˜¯Linuxé‡å¯ä¹‹åŽé‡æ–°æˆªå›¾ï¼Œagettyçš„pidä¸Žä¹‹å‰å›¾ç‰‡çš„ä¸ä¸€æ ·æ˜¯æ­£å¸¸çš„ï¼
>```
>
><img src="ä¹ã€Linuxè¿›ç¨‹å±‚æ¬¡åˆ†æž.assets/image-20230721230514006.png" alt="image-20230721230514006" />

### 4. ä¼šè¯ä¸Žå‰åŽå°è¿›ç¨‹ç»„

><img src="ä¹ã€Linuxè¿›ç¨‹å±‚æ¬¡åˆ†æž.assets/image-20230721230550721.png" alt="image-20230721230550721" />

#### (1) é—®é¢˜

>- é—®é¢˜1 : â“åœ¨ç»ˆç«¯ä¸­è¾“å…¥å‘½ä»¤åŽ , ä¼šå‘ç”Ÿä»€ä¹ˆ?
>  - å½“å‘½ä»¤è¡Œshell $\color{red}{è¿è¡Œå‘½ä»¤åŽåˆ›å»ºä¸€ä¸ªæ–°çš„è¿›ç¨‹ç»„}$
>  - å¦‚æžœè¿è¡Œçš„å‘½ä»¤ä¸­æœ‰ **$\color{red}{å¤šä¸ªå­å‘½ä»¤}$** åˆ™åˆ›å»º **$\color{red}{å¤šä¸ªè¿›ç¨‹}$** $\color{red}{(å¤„äºŽæ–°å»ºçš„è¿›ç¨‹ç»„ä¸­)}$
>  - å‘½ä»¤ $\color{red}{ä¸å¸¦}$ `&`
>	  - shellå°†æ–°å»ºçš„è¿›ç¨‹ç»„è®¾ç½®ä¸º $\color{red}{å‰å°è¿›ç¨‹ç»„}$ , å¹¶å°†è‡ªå·±æš‚æ—¶è®¾ç½®ä¸ºåŽå°è¿›ç¨‹ç»„
>  - å‘½ä»¤ $\color{red}{å¸¦}$ `&`
>    - shellå°†æ–°å»ºçš„è¿›ç¨‹ç»„è®¾ç½®ä¸º $\color{red}{åŽå°è¿›ç¨‹ç»„}$ , è‡ªå·±ä¾æ—§æ˜¯å‰å°è¿›ç¨‹ç»„
>
>
>* é—®é¢˜2 : â“ä»€ä¹ˆæ˜¯ ç»ˆç«¯è¿›ç¨‹ç»„æ ‡è¯† (TPGID)?
>
>    - $\color{red}{æ ‡è¯†è¿›ç¨‹}$ **$\color{red}{æ˜¯å¦}$** $\color{red}{å¤„äºŽä¸€ä¸ª}$ **$\color{red}{å’Œç»ˆç«¯ç›¸å…³}$** $\color{red}{çš„è¿›ç¨‹ç»„ä¸­}$
>
>
>     - $\color{SkyBlue}{å‰å°è¿›ç¨‹ç»„ : TPGID == PGID}$
>
>
>     - $\color{SkyBlue}{åŽå°è¿›ç¨‹ç»„ : TPGID != PGID}$
>
>
>     - $\color{SkyBlue}{è‹¥è¿›ç¨‹å’Œä»»ä½•ç»ˆç«¯æ— å…³ : TPGID == -1}$
>
>
>
>
>
>```
>é€šè¿‡æ¯”è¾ƒTPGIDä¸ŽPGIDå¯åˆ¤æ–­:ä¸€ä¸ªè¿›ç¨‹æ˜¯å±žäºŽå‰å°è¿›ç¨‹ç»„ , è¿˜æ˜¯åŽå°è¿›ç¨‹ç»„
>ç”±äºŽå‰å°è¿›ç¨‹ç»„å¯èƒ½æ”¹å˜,TPGIDç”¨äºŽæ ‡è¯†å½“å‰çš„å‰å°è¿›ç¨‹ç»„
>å½“ä¸€ä¸ªè¿›ç¨‹ç»„ä¸Žç»ˆç«¯ç›¸å…³è”,å½“ç»ˆç«¯æ–­å¼€äº†è¿žæŽ¥,è¿›ç¨‹ç»„ä¸­çš„æ‰€æœ‰è¿›ç¨‹éƒ½ä¼šè¢«ç»“æŸæŽ‰
>```

#### (2) å®žéªŒ

>[pgid_j.cppå‚è€ƒä»£ç ](https://github.com/WONGZEONJYU/Linux_System_Program/blob/main/8.Process_Hierarchy/pgid_j.cpp)
>
><img src="ä¹ã€Linuxè¿›ç¨‹å±‚æ¬¡åˆ†æž.assets/image-20230721233347937.png" alt="image-20230721233347937" />
>
>1. ä¸å¸¦ &çš„æƒ…å†µ
>
><img src="ä¹ã€Linuxè¿›ç¨‹å±‚æ¬¡åˆ†æž.assets/image-20230721233459584.png" alt="image-20230721233459584" />
>
>2. å¸¦ &çš„æƒ…å†µ
>
><img src="ä¹ã€Linuxè¿›ç¨‹å±‚æ¬¡åˆ†æž.assets/image-20230721233540227.png" alt="image-20230721233540227" />
>
>```
>æ³¨é‡Š:ä¸‹å›¾å’Œä¸Šå›¾çš„ç¬¬äºŒä¸ªç»ˆç«¯å›¾æ˜¯é‡æ–°æ‰“å¼€çš„ä¸€ä¸ªç»ˆç«¯
>```
>
><img src="ä¹ã€Linuxè¿›ç¨‹å±‚æ¬¡åˆ†æž.assets/image-20230721234405372.png" alt="image-20230721234405372" />

## (ä¸‰) ä¼šè¯ç¼–ç¨‹æ·±åº¦å‰–æž

### 1. Linuxä¼šè¯æŽ¥å£

>- `#include <unistd.h>`
>- `pid_t getsid(pid_t pid);`  $\color{SkyBlue}{èŽ·å–æŒ‡å®šè¿›ç¨‹çš„SID,(pid == 0)==> å½“å‰è¿›ç¨‹}$
>- `pid_t setsid(void);` $\color{SkyBlue}{è°ƒç”¨è¿›ç¨‹ä¸èƒ½æ˜¯è¿›ç¨‹ç»„é•¿}$
>   - åˆ›å»ºæ–°ä¼šè¯ , SID == PID , è°ƒç”¨è¿›ç¨‹æˆä¸ºä¼šè¯é¦–è¿›ç¨‹
>   - åˆ›å»ºæ–°è¿›ç¨‹ç»„ , PGID == PID , è°ƒç”¨è¿›ç¨‹æˆä¸ºè¿›ç¨‹ç»„é•¿
>   - è°ƒç”¨è¿›ç¨‹æ²¡æœ‰æŽ§åˆ¶ç»ˆç«¯ , è‹¥è°ƒç”¨å‰å…³è”äº†æŽ§åˆ¶ç»ˆç«¯ , è°ƒç”¨åŽä¸ŽæŽ§åˆ¶ç»ˆç«¯æ–­è”
>

### 2. å®žä¾‹

>â“ä¸‹é¢çš„ç¨‹åºè¾“å‡ºä»€ä¹ˆ?ä¸ºä»€ä¹ˆ?
>
><img src="ä¹ã€Linuxè¿›ç¨‹å±‚æ¬¡åˆ†æž.assets/image-20230721235146341.png" alt="image-20230721235146341" />
>
>[session.cppå‚è€ƒä»£ç ](https://github.com/WONGZEONJYU/Linux_System_Program/blob/main/8.Process_Hierarchy/session.cpp)
>
>(1) å®žéªŒä¸€
>
><img src="ä¹ã€Linuxè¿›ç¨‹å±‚æ¬¡åˆ†æž.assets/image-20230721235940872.png" alt="image-20230721235940872" />
>
>![image-20230721235956654](ä¹ã€Linuxè¿›ç¨‹å±‚æ¬¡åˆ†æž.assets/image-20230721235956654.png)
>
><img src="ä¹ã€Linuxè¿›ç¨‹å±‚æ¬¡åˆ†æž.assets/image-20230722000009896.png" alt="image-20230722000009896" />
>
>(2) å®žéªŒäºŒ
>
>![image-20230722000056393](ä¹ã€Linuxè¿›ç¨‹å±‚æ¬¡åˆ†æž.assets/image-20230722000056393.png)
>
>![image-20230722000105812](ä¹ã€Linuxè¿›ç¨‹å±‚æ¬¡åˆ†æž.assets/image-20230722000105812.png)
>
><img src="ä¹ã€Linuxè¿›ç¨‹å±‚æ¬¡åˆ†æž.assets/image-20230722000126699.png" alt="image-20230722000126699" />
>
>```
>å°æç¤º:printf/std::coutå¾€æ ‡å‡†è¾“å‡ºæ‰“å°ä¿¡æ¯,é»˜è®¤æƒ…å†µä¸‹,æ ‡å‡†è¾“å‡ºå’Œé»˜è®¤çš„ç»ˆç«¯ç›¸å…³è”ã€‚
>æ€Žä¹ˆçŸ¥é“æ ‡å‡†è¾“å‡ºå…³è”åˆ°å“ªä¸ªç»ˆç«¯?æ ‡è¯†å°±æ˜¯stdout
>
>ä¸Šé¢çš„å®žéªŒï¼š
>	å­è¿›ç¨‹çš„æ ‡å‡†è¾“å‡ºæ˜¯æŒ‚æŽ¥åœ¨äº†æˆ‘ä»¬æ“ä½œçš„ç»ˆç«¯ä¸Šçš„ï¼Œè™½ç„¶å­è¿›ç¨‹è°ƒç”¨äº†setsid()ï¼Œä½†æ˜¯å­è¿›ç¨‹æœ¬èº«çš„æ ‡å‡†è¾“å‡ºè¿˜æŒ‚æŽ¥åœ¨ä¹‹å‰æˆ‘ä»¬æ“ä½œçš„ç»ˆç«¯ä¸Šã€‚
>
>	ç”±äºŽprintf/std::coutæ˜¯å¾€æ ‡å‡†è¾“å‡ºè¿›è¡Œæ‰“å°ä¿¡æ¯çš„ï¼Œç„¶è€Œæ ‡å‡†è¾“å‡ºä¹Ÿæ˜¯æŒ‚æŽ¥åœ¨ä¹‹å‰æˆ‘ä»¬æ“ä½œçš„ç»ˆç«¯ä¸Šï¼Œæ‰€ä»¥æ‰“å°çš„ä¿¡æ¯å°±ä¼šå‡ºçŽ°åœ¨ä¹‹å‰æˆ‘ä»¬æ“ä½œçš„ç»ˆç«¯ä¸Šã€‚
>
>å¼ºè°ƒï¼šæ ‡å‡†è¾“å…¥/è¾“å‡ºä¸Žç»ˆç«¯æ— å…³çš„ï¼Œåªä¸è¿‡é»˜è®¤æƒ…å†µä¸‹ï¼Œæ ‡å‡†è¾“å‡º/è¾“å‡ºä¸Žç»ˆç«¯æŒ‚æŽ¥åˆ°äº†ä¸€èµ·
>
>å¦‚æžœä¸è®©æ ‡å‡†è¾“å…¥/è¾“å‡ºä¸Žç»ˆç«¯æŒ‚æŽ¥åˆ°ä¸€èµ·ï¼Œå¯ä»¥è¿›è¡Œé‡å®šå‘ï¼Œæ€Žä¹ˆæ“ä½œï¼Ÿ===>ä¸‹å›žåˆ†è§£
>```

